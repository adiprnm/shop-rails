<% if images.any? %>
  <div class="carousel" data-controller="carousel" data-carousel-autoplay-value="false">
    <div class="carousel-container" data-carousel-target="container">
      <% images.each do |image| %>
        <div class="carousel-slide" data-carousel-target="slide">
          <%= image_tag image, class: "product-image product-image--full-height" %>
        </div>
      <% end %>
    </div>

    <% if images.length > 1 %>
      <div class="carousel-nav">
        <button type="button" data-carousel-target="prev" data-action="carousel#previous" aria-label="Previous image">
          &#10094;
        </button>
        <div class="carousel-indicators">
          <% images.each_with_index do |_, index| %>
            <button type="button" data-action="carousel#goTo" data-index="<%= index %>" class="carousel-indicator <%= index == 0 ? 'active' : '' %>">
              <%= index + 1 %>
            </button>
          <% end %>
        </div>
        <button type="button" data-carousel-target="next" data-action="carousel#next" aria-label="Next image">
          &#10095;
        </button>
      </div>
    <% end %>
  </div>
<% elsif featured_image.present? && featured_image.attached? %>
  <%= image_tag featured_image, class: "product-image product-image--full-height mb-4" %>
<% end %>
